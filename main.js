(()=>{"use strict";function e(e,t,n,i,r,a,c,d){return{city:e,temp:t,feels:n,hum:i,hi:r,lo:a,weather:c,icon:d}}function t(e){let t={};t.city=e.city.name,t.hourly=[];for(let n=0;n<e.list.length;){let i=e.list[n].dt_txt.split(" ");if(t.hourly[n]={date:i[0],time:"",temp:Math.round(e.list[n].main.temp)+"°",weather:e.list[n].weather[0].main,wea_desc:e.list[n].weather[0].description,wea_icon:e.list[n].weather[0].icon,wea_id:e.list[n].weather[0].id},i[1]>"12:00:00"){let e=i[1].split(":"),r=e[0]-12+":"+e[1]+" PM";t.hourly[n].time=r}else if("12:00:00"===i[1]){let e=i[1].split(":"),r=e[0]+":"+e[1]+" PM";t.hourly[n].time=r}else{let e=i[1].split(":");"00"===e[0]&&(e[0]="12"),"0"===e[0].charAt(0)&&(e[0]=e[0].substring(1));let r=e[0]+":"+e[1]+" AM";t.hourly[n].time=r}n++}return t}function n(e){let t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];for(let n=0;n<7;){if(e===n)return t[e];++n}}function i(e,t,i){const r=document.createElement("div");r.setAttribute("id","hourWrap");const a=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),o=document.createElement("div"),u=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div");a.setAttribute("id","city"),a.innerText=t.cast.city,c.setAttribute("id","day");let s=new Date(t.cast.hourly[i].date);c.innerText=n(s.getDay()),d.setAttribute("id","date"),d.innerHTML=t.cast.hourly[i].date,o.setAttribute("id","time"),o.innerText=t.cast.hourly[i].time,u.setAttribute("id","temp"),u.setAttribute("class","temp"),u.innerText=t.cast.hourly[i].temp,l.setAttribute("id","currentWeather"),l.innerText=t.cast.hourly[i].weather;const p=t.cast.hourly[i].wea_icon;m.setAttribute("id","icon");const h=document.createElement("img");h.src=`https://openweathermap.org/img/wn/${p}@2x.png`,m.appendChild(h),e.appendChild(r),r.appendChild(a),r.appendChild(c),r.appendChild(d),r.appendChild(o),r.appendChild(u),r.appendChild(l),r.appendChild(m)}function r(e,t,i){const r=document.createElement("div");r.setAttribute("id","extHourWrap");const a=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),o=document.createElement("div"),u=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div");a.setAttribute("id","extCity"),a.innerText=t.cast.city,c.setAttribute("id","extDay");let s=new Date(t.cast.hourly[i].date);c.innerText=n(s.getDay()),d.setAttribute("id","extDate"),d.innerHTML=t.cast.hourly[i].date,o.setAttribute("id","extTime"),o.innerText=t.cast.hourly[i].time,u.setAttribute("id","extTemp"),u.innerText=t.cast.hourly[i].temp,l.setAttribute("id","extCurrentWeather"),l.innerText=t.cast.hourly[i].weather;const p=t.cast.hourly[i].wea_icon;m.setAttribute("id","extIcon");const h=document.createElement("img");h.src=`https://openweathermap.org/img/wn/${p}@2x.png`,m.appendChild(h),e.appendChild(r),r.appendChild(a);const y=document.createElement("div");y.setAttribute("id","dayWrap"),r.appendChild(y),r.appendChild(o);const w=document.createElement("div");w.setAttribute("id","weatWrap"),r.appendChild(w),r.appendChild(u),w.appendChild(l),w.appendChild(m),y.appendChild(c),y.appendChild(d)}function a(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const c=async function(n,d){const o=document.getElementById("current_wrap"),u=document.getElementById("wrap5Hour"),l=document.getElementById("extwrap");a(o),a(u),a(l);const m=await async function(n,i){return"usa"===i?{current:await async function(t){let n;try{const i=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t},usa&units=imperial&APPID=7e2565eabacd81524ddf1835a845553d`,{mode:"cors"}),r=await i.json();n=await new e(r.name,r.main.temp,r.main.feels_like,r.main.humidity,r.main.temp_max,r.main.temp_min,r.weather[0].main,r.weather[0].icon)}catch(e){console.log(e+" : Invalid Location, Try Again!");const t=document.getElementById("searchBar");return t.value="Invalid Location, Try Again!",t.style.boxShadow="0 0 10px 1px red inset",c("Atlanta, GA","usa")}return n}(n),cast:await async function(e){const n=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e},usa&units=imperial&APPID=7e2565eabacd81524ddf1835a845553d`,{mode:"cors"}),i=await n.json();return await new t(i)}(n)}:{current:await getWeather(n),cast:await getForecast(n)}}(n,d);!function(e){const t=document.getElementById("current_wrap"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div");n.setAttribute("id","curcity"),n.innerText=e.current.city,i.setAttribute("id","curtemp"),i.innerText=Math.round(e.current.temp)+"°",r.setAttribute("id","curhiLo"),r.innerText=Math.round(e.current.hi)+"°/"+Math.round(e.current.lo)+"°",a.setAttribute("id","curcurrentWeather"),a.innerText=e.current.weather;const d=e.current.icon;c.setAttribute("id","curicon");const o=document.createElement("img");o.src=`https://openweathermap.org/img/wn/${d}@2x.png`,c.appendChild(o),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(a),t.appendChild(c)}(m),function(e){const t=document.getElementById("wrap5Hour");for(let n=0;n<3;)i(t,e,n),++n}(m),function(e){const t=document.getElementById("extwrap");for(let n=0;n<e.cast.hourly.length;)r(t,e,n),++n}(m)};function d(e){let t=5*(e.substring(0,e.length-1)-32)/9;return Math.round(t)+"°"}function o(e){let t=9*e.substring(0,e.length-1)/5+32;return Math.round(t)+"°"}function u(e){if("cel"===e){const e=document.getElementById("curtemp"),t=document.querySelectorAll(".temp"),n=document.querySelectorAll("#extTemp");e.innerText=d(e.innerText),t.forEach((e=>{e.innerText=d(e.innerText)})),n.forEach((e=>{e.innerText=d(e.innerText)})),m="fah"}else if("fah"===e){const e=document.getElementById("curtemp"),t=document.querySelectorAll(".temp"),n=document.querySelectorAll("#extTemp");e.innerText=o(e.innerText),t.forEach((e=>{e.innerText=o(e.innerText)})),n.forEach((e=>{e.innerText=o(e.innerText)})),m="cel"}}const l=document.getElementById("searchBar");document.getElementById("searchBtn").addEventListener("click",(()=>{l.style.boxShadow="";const e=l.value;c(e,"usa")}));let m="cel";document.getElementById("celFah").addEventListener("click",(()=>{u(m)})),function(){const e=l.value;c(e,"usa"),u()}()})();